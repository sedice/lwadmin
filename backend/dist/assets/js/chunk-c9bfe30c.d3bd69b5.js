(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c9bfe30c"],{"41a4":function(e,t,a){},5461:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"fillcontain"},[a("TitlePanel",{attrs:{title:"当前位置:  数据查询 / 补货数据查询"}}),a("SerchPanel",{attrs:{serchRule:e.serchRule},on:{clickSerch:e.clickSerch}}),a("div",{staticClass:"table_container"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,"max-height":"600",border:""}},[a("el-table-column",{attrs:{type:"index",label:"序号",align:"center",width:"70"}}),a("el-table-column",{attrs:{prop:"createtime",formatter:e.formatDate,width:"150",label:"日期",align:"center"}}),a("el-table-column",{attrs:{prop:"title",label:"标题",align:"center"}}),a("el-table-column",{attrs:{prop:"creator",label:"提交者",align:"center",width:"120"}}),a("el-table-column",{attrs:{prop:"shop",label:"门店",align:"center",width:"120"}}),a("el-table-column",{attrs:{prop:"operation",align:"center",label:"操作",fixed:"right",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.hasOperAccess?a("el-button",{attrs:{type:"danger",icon:"edit",size:"small"},on:{click:function(a){return e.onDeleteData(t.row)}}},[e._v("删除")]):e._e(),a("el-button",{attrs:{type:"warning",icon:"edit",size:"small"},on:{click:function(a){return e.onShowDeatilDialog(t.row)}}},[e._v("查看")])]}}])})],1),a("PagePanel",{attrs:{paginations:e.paginations},on:{updateData:e.getData}})],1),a("DialogReplenishDetail",{attrs:{dialogConf:e.dialogDetailConf}})],1)},i=[],l=(a("1bc7"),a("6899")),s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.dialogConf.datagroup.length>0?a("el-dialog",{attrs:{title:e.dialogConf.title,visible:e.dialogConf.visible,width:"70%"},on:{"update:visible":function(t){return e.$set(e.dialogConf,"visible",t)}}},[a("el-table",{attrs:{data:e.dialogConf.datagroup,border:"","lock-scroll":"false"}},[a("el-table-column",{attrs:{type:"index",label:"序号",align:"center",width:"70"}}),a("el-table-column",{attrs:{property:"name",label:"商品名称",align:"center"}})],1)],1):e._e()},o=[],r={props:{dialogConf:Object},data:function(){return{}},methods:{}},c=r,u=a("5d22"),p=Object(u["a"])(c,s,o,!1,null,null,null),h=p.exports,g=a("fb16"),d=a("f345"),f={data:function(){return{tableData:[],dialogDetailConf:{visible:!1,title:"",datagroup:[]},serchRule:{creator:"",shop:"",shopgroup:[],time:[]},paginations:{page_index:1,total:0,page_size:10,page_sizes:[10,20,50],layout:"total, sizes, prev, pager, next, jumper"}}},computed:{user:function(){return this.$store.getters.user},hasOperAccess:function(){return"admin"==this.user.identity||"manager"==this.user.identity}},components:{SerchPanel:l["a"],DialogReplenishDetail:h,TitlePanel:g["a"],PagePanel:d["a"]},created:function(){this.getData()},methods:{formatDate:function(e,t,a,n){var i=new Date(a),l=i.getFullYear(),s=i.getMonth()+1;s<10&&(s="0"+s);var o=i.getDate();return o<10&&(o="0"+o),l+"/"+s+"/"+o},clickSerch:function(){this.paginations.page_index=1,console.log(this.serchRule),this.getData()},getDetailData:function(e){var t=this,a="/api/replenish/".concat(e._id);this.$axios.get(a).then((function(a){t.dialogDetailConf.datagroup=a.data.datagroup.map((function(e){return{name:e}})),t.dialogDetailConf.visible=!0,t.dialogDetailConf.title=t.getTitle(e)}))},getTitle:function(e){var t=e.shop,a=e.creator,n=e.createtime,i=e.createindex,l=new Date(n),s=l.getFullYear(),o=l.getMonth()+1;o<10&&(o="0"+o);var r=l.getDate();return r<10&&(r="0"+r),t+"_"+a+"_补货单_"+s+o+r+"_"+i},getData:function(){var e=this,t=this.paginations.page_index,a=this.paginations.page_size,n="/api/replenish?page=".concat(t,"&pagesize=").concat(a);if(this.serchRule.creator&&(n+="&creator=".concat(this.serchRule.creator)),this.serchRule.shop&&(n+="&shop=".concat(this.serchRule.shop)),2==this.serchRule.time.length){n+="&time_from=".concat(this.serchRule.time[0]);var i=this.serchRule.time[1]+80063e3;n+="&time_to=".concat(i)}this.$axios.get(n).then((function(t){if(0==e.serchRule.shopgroup.length){var a=t.data.shopgroup;e.serchRule.shopgroup.push({label:"全部",value:void 0}),a.forEach((function(t){e.serchRule.shopgroup.push({label:t,value:t})}))}e.tableData=t.data.group,e.tableData.forEach((function(t){t.title=e.getTitle(t)})),e.setPaginations(t.data)}))},onDeleteData:function(e){var t=this;this.$confirm("此操作将永久删除该记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.$axios.delete("/api/replenish/".concat(e._id)).then((function(e){t.$message({type:"success",message:"删除成功"}),t.getData()}))})).catch((function(){}))},onShowDeatilDialog:function(e){this.getDetailData(e)},handleCurrentChange:function(e){this.paginations.page_index=e,this.getData()},handleSizeChange:function(e){this.paginations.page_index=1,this.paginations.page_size=e,this.getData()},setPaginations:function(e){this.paginations.total=e.total_num,this.paginations.page_index=e.page,this.paginations.page_size=e.pagesize}}},m=f,b=(a("7f11"),Object(u["a"])(m,n,i,!1,null,"2177018e",null));t["default"]=b.exports},6899:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[a("el-form-item",{attrs:{label:"创建者"}},[a("el-input",{attrs:{placeholder:"创建者"},model:{value:e.serchRule.creator,callback:function(t){e.$set(e.serchRule,"creator",t)},expression:"serchRule.creator"}})],1),a("el-form-item",{attrs:{label:"门店"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.serchRule.shop,callback:function(t){e.$set(e.serchRule,"shop",t)},expression:"serchRule.shop"}},e._l(e.serchRule.shopgroup,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",[a("el-date-picker",{attrs:{type:"daterange",align:"right","value-format":"timestamp","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.serchRule.time,callback:function(t){e.$set(e.serchRule,"time",t)},expression:"serchRule.time"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.clear}},[e._v("清除")]),a("el-button",{attrs:{type:"primary"},on:{click:e.clickSerch}},[e._v("查询")])],1)],1)],1)},i=[],l={props:{serchRule:Object},methods:{clickSerch:function(){this.$emit("clickSerch")},clear:function(){this.serchRule.name="",this.serchRule.shop="",this.serchRule.time=[]}}},s=l,o=a("5d22"),r=Object(o["a"])(s,n,i,!1,null,null,null);t["a"]=r.exports},"7f11":function(e,t,a){"use strict";a("c4aa")},a1d4:function(e,t,a){},af66:function(e,t,a){"use strict";a("41a4")},c4aa:function(e,t,a){},d8b2:function(e,t,a){"use strict";a("a1d4")},f345:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-row",[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"pagination"},[e.paginations.total>0?a("el-pagination",{attrs:{total:e.paginations.total,"page-size":e.paginations.page_size,"current-page":e.paginations.page_index,"page-sizes":e.page_sizes,layout:e.layout},on:{"update:currentPage":function(t){return e.$set(e.paginations,"page_index",t)},"update:current-page":function(t){return e.$set(e.paginations,"page_index",t)},"current-change":e.handleCurrentChange,"size-change":e.handleSizeChange}}):e._e()],1)])],1)},i=[],l={props:{paginations:Object},data:function(){return{page_sizes:[10,20,50],layout:"total, sizes, prev, pager, next, jumper"}},methods:{handleCurrentChange:function(e){this.paginations.page_index=e,this.$emit("updateData")},handleSizeChange:function(e){this.paginations.page_index=1,this.paginations.page_size=e,this.$emit("updateData")}}},s=l,o=(a("af66"),a("5d22")),r=Object(o["a"])(s,n,i,!1,null,"29eca91a",null);t["a"]=r.exports},fb16:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"titlePanel"},[a("i",{staticClass:"el-icon-location iconItem"}),a("span",{staticClass:"titleContent"},[e._v(e._s(e.title))])])},i=[],l={props:{title:String},data:function(){return{}},methods:{}},s=l,o=(a("d8b2"),a("5d22")),r=Object(o["a"])(s,n,i,!1,null,"42c28e27",null);t["a"]=r.exports}}]);
//# sourceMappingURL=chunk-c9bfe30c.d3bd69b5.js.map